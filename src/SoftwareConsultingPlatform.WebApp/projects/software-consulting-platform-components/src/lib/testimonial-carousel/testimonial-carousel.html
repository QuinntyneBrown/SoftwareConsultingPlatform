<section class="sc-testimonial-carousel">
  <div class="sc-testimonial-carousel__container">
    <h2 *ngIf="sectionTitle" class="sc-testimonial-carousel__title">{{ sectionTitle }}</h2>

    <div class="sc-testimonial-carousel__content">
      <button
        *ngIf="testimonials.length > 1"
        class="sc-testimonial-carousel__nav sc-testimonial-carousel__nav--prev"
        (click)="previous()"
        aria-label="Previous testimonial"
      >
        ←
      </button>

      <div class="sc-testimonial-carousel__slides">
        <div
          *ngFor="let testimonial of testimonials; let i = index"
          class="sc-testimonial-carousel__slide"
          [class.sc-testimonial-carousel__slide--active]="i === currentIndex"
        >
          <sc-testimonial
            [quote]="testimonial.quote"
            [authorName]="testimonial.authorName"
            [authorPosition]="testimonial.authorPosition"
            [authorCompany]="testimonial.authorCompany"
            [avatarUrl]="testimonial.avatarUrl"
            [rating]="testimonial.rating"
          ></sc-testimonial>
        </div>
      </div>

      <button
        *ngIf="testimonials.length > 1"
        class="sc-testimonial-carousel__nav sc-testimonial-carousel__nav--next"
        (click)="next()"
        aria-label="Next testimonial"
      >
        →
      </button>
    </div>

    <div *ngIf="testimonials.length > 1" class="sc-testimonial-carousel__dots">
      <button
        *ngFor="let testimonial of testimonials; let i = index"
        class="sc-testimonial-carousel__dot"
        [class.sc-testimonial-carousel__dot--active]="i === currentIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to testimonial ' + (i + 1)"
      ></button>
    </div>
  </div>
</section>
